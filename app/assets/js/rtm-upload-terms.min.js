/*! 
 * rtMedia JavaScript Library 
 * @package rtMedia 
 */

var rtmediaTermsConditionsElement;function rtp_display_terms_warning(e,r){if(0===jQuery(".rt_alert_msg").length){var t=jQuery("<span />").attr("style","color:red; display:block; clear:both;").addClass("rt_alert_msg").empty().append(r);e.after(t)}}function handle_privacy_message(){jQuery("#close_rtm_privacy_message").on("click",function(){var e=jQuery(".privacy_message_wrapper");e.fadeOut("slow",function(){e.remove(),jQuery.cookie("rtm_show_privacy_message","view",{expires:1,path:"/"})})})}"object"==typeof rtMediaHook&&(rtMediaHook.register("rtmedia_js_before_upload",function(e){if(!1===e||void 0===e.uploader.settings.multipart_params||void 0===e.src)return e;var r=e.uploader.settings.multipart_params,t=!1,a=!1,i=!1;if("activity"===e.src?(t="activity_terms_condition_request",a="activity_terms_condition","true"===rtmedia_upload_terms_data.activity_terms_enabled&&(i=!0)):"uploader"===e.src&&(t="uploader_terms_condition_request",a="uploader_terms_condition","true"===rtmedia_upload_terms_data.uploader_terms_enabled&&(i=!0)),!i)return!0;if(t&&a&&i)if(r[t]="true",rtmediaTermsConditionsElement&&0<rtmediaTermsConditionsElement.length)r[a]=rtmediaTermsConditionsElement.prop("checked")?"true":"false";else{var d=$("#rtmedia_upload_terms_conditions");0<d.length&&(rtmediaTermsConditionsElement=d,r[a]=d.prop("checked")?"true":"false")}return e.uploader.settings.multipart_params=r,!0}),rtMediaHook.register("rtmedia_js_upload_file",function(e){if(!1===e||void 0===e.src)return e;if("uploader"===e.src){if("false"===rtmedia_upload_terms_data.uploader_terms_enabled)return!0;var r=$("#rtmedia_upload_terms_conditions");return 0===r.length?(rtp_display_terms_warning($("#drag-drop-area"),rtmedia_upload_terms_data.message),!1):!!(rtmediaTermsConditionsElement=r).prop("checked")||(rtp_display_terms_warning(r.parent(".rtmedia-upload-terms"),rtmedia_upload_terms_data.message),!1)}}),rtMediaHook.register("rtmedia_js_before_activity_added",function(e){var r,t,a=jQuery("#aw-whats-new-submit");if(e&&"activity"===e.src){if("false"===rtmedia_upload_terms_data.activity_terms_enabled)return!0;r=(t=jQuery("#whats-new-form")).find("#rtmedia_upload_terms_conditions")}else r=jQuery("#rtmedia_upload_terms_conditions");return 1!==r.length?(rtp_display_terms_warning(t.find("#whats-new-options"),rtmedia_upload_terms_data.message),!1):(r.removeAttr("disabled"),rtmediaTermsConditionsElement=r,!1===e?(a.removeAttr("disabled"),a.removeClass("loading"),e):!!r.is(":checked")||(a.removeAttr("disabled"),a.removeClass("loading"),e&&"activity"===e.src?rtp_display_terms_warning(t.find(".rtmedia-upload-terms"),rtmedia_upload_terms_data.message):rtp_display_terms_warning(r.parent(".rtmedia-upload-terms"),rtmedia_upload_terms_data.message),!1))}),rtMediaHook.register("rtmedia_js_after_file_upload",function(){var e=jQuery("#rtmedia-upload-container #rtmedia_upload_terms_conditions");return 1===e.length&&(e.removeAttr("checked"),jQuery(".rt_alert_msg").remove()),!0}),rtMediaHook.register("rtmedia_js_after_activity_added",function(){return jQuery("#rtmedia_upload_terms_conditions").prop("checked",!1),!0})),jQuery(document).ready(function(){var a=jQuery("#rtmedia_upload_terms_conditions");a.on("click",function(){var e=jQuery(".start-media-upload");if(e.focus(),a.is(":checked")){var r=a.siblings("span.rt_alert_msg");1===r.length?r.remove():a.parent().siblings("span.rt_alert_msg").remove()}else rtp_display_terms_warning(a.parent(".rtmedia-upload-terms"),rtmedia_upload_terms_data.message);if("undefined"!=typeof rtmedia_direct_upload_enabled&&"1"===rtmedia_direct_upload_enabled){var t=jQuery("#aw-whats-new-submit");1===t.length?""===jQuery("#whats-new").val().trim()&&1!==jQuery("#rtmedia_uploader_filelist").children("li").length||t.trigger("click"):e.trigger("click")}}),handle_privacy_message()});